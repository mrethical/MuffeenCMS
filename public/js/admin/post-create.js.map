{"version":3,"sources":["post-create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post-create.js","sourcesContent":["\r\nvar input_tags_container = null; // set this at onload\r\nvar div_tags_container = null; // set this at onload\r\n\r\nvar tags = [];\r\nvar tag_count = 0;\r\nfunction add_tag_input(name) {\r\n    if (tags.indexOf(name.toLowerCase()) != -1) return false;\r\n    var html = '<input type=\"hidden\" class=\"post-tag\" name=\"tags[]\" id=\"post-tag-' + tag_count + '\" value=\"' + name + '\" />';\r\n    input_tags_container.append(html);\r\n    tags.push(name.toLowerCase());\r\n    return tag_count++;\r\n}\r\n\r\nfunction add_tag_container(id) {\r\n    if (id === false) return false;\r\n    var tag_name = $('#post-tag-' + id).val();\r\n    var html = \t'<div class=\"post-tag-container\" id=\"post-tag-container-' + id + '\">'\r\n        +\t\t'<span class=\"post-tag-name\">' + tag_name + '</span>&nbsp;'\r\n        +\t\t'<button type=\"button\" class=\"close\" id=\"post-tag-container-delete-' + id  + '\" aria-label=\"Close\">'\r\n        +\t\t\t'<span aria-hidden=\"true\">&times;</span>'\r\n        +\t\t'</button>'\r\n        +\t'</div>';\r\n    $(html).insertBefore('#post-tag-insert');\r\n    $('#post-tag-container-delete-' + id ).click(function(){\r\n        $('#post-tag-container-' + id).remove();\r\n        tags.splice(tags.indexOf($('#post-tag-' + id).val()), 1);\r\n        $('#post-tag-' + id).remove();\r\n    });\r\n}\r\n\r\nfunction create_tag_insert_input() {\r\n    var html = \t'<div class=\"post-tag-container\" id=\"post-tag-insert\">'\r\n        +\t\t'<span style=\"\">New:</span>&nbsp;'\r\n        +\t\t'<input type=\"text\" class=\"typeahead form-control\" id=\"post-tag-insert-name\" />&nbsp;'\r\n        +\t\t'<button type=\"button\" class=\"btn btn-default\" id=\"post-tag-insert-save\">'\r\n        +\t\t\t'<i class=\"fa fa-check\" aria-hidden=\"true\"></i>'\r\n        +\t\t'</button>'\r\n        +\t'</div>';\r\n    div_tags_container.append($(html));\r\n    $('#post-tag-insert-name').typeahead({\r\n        highlight: true,\r\n    }, {\r\n        name: 'tags',\r\n        source: function(query, syncResults, asyncResults) {\r\n            $.get(server_dir + 'admin/posts/tags?output=search&keyword=' + query, function(data) {\r\n                asyncResults(data);\r\n            });\r\n        }\r\n    });\r\n    $('#post-tag-insert-save').click(function(){\r\n        var name = $('#post-tag-insert-name').val();\r\n        if (name != '') {\r\n            var id = add_tag_input(name);\r\n            add_tag_container(id);\r\n            $('#post-tag-insert-name').val('');\r\n        }\r\n    });\r\n    $('#post-tag-insert-name').keypress(function (e) {\r\n        var key = e.which;\r\n        if (key == 13) { // the enter key code\r\n            $('#post-tag-insert-save').click();\r\n            return false;\r\n        }\r\n    });\r\n}\r\n\r\n$(function(){\r\n\r\n    input_tags_container = $('#tags-container > #input-tags-container');\r\n    div_tags_container = $('#tags-container > #div-tags-container');\r\n    create_tag_insert_input();\r\n\r\n    $('.post-tag').each(function(){\r\n        tags.push($(this).val().toLowerCase());\r\n        add_tag_container(tag_count);\r\n        tag_count++;\r\n    });\r\n\r\n    $('#categories-filter').change(function(){\r\n        var success = function(result) {\r\n            $('#res-image').empty();\r\n            $('#res-image').append(result);\r\n            $(\"select.image-picker\").imagepicker({\r\n                show_label: true,\r\n                initialized: function(){\r\n                    $('ul.image_picker_selector > li').prop('class', 'col-sm-5');\r\n                    $('ul.image_picker_selector > li').css('padding', '0px');\r\n                    $('ul.image_picker_selector > li').css('margin', '0px 20px 0px 0px');\r\n                    $('ul.image_picker_selector > li > div.thumbnail > p').css('word-wrap', 'break-word');\r\n                }\r\n            });\r\n        };\r\n        callback('GET', 'admin/resources/categories/' + $(this).val(), 'html',\r\n            {output: 'resources_select_options', image_only: 'true'}, success);\r\n    });\r\n\r\n    $('#add-image').click(function(){\r\n        $('#modal-image-add #res-image').prop('multiple', '');\r\n        $(\"select.image-picker\").imagepicker({\r\n            show_label: true,\r\n            initialized: function(){\r\n                $('ul.image_picker_selector > li').prop('class', 'col-sm-5');\r\n                $('ul.image_picker_selector > li').css('padding', '0px');\r\n                $('ul.image_picker_selector > li').css('margin', '0px 20px 0px 0px');\r\n                $('ul.image_picker_selector > li > div.thumbnail > p').css('word-wrap', 'break-word');\r\n            }\r\n        });\r\n        $('#modal-image-add').modal(\"show\");\r\n        $('#modal-image-submit').click(function() {\r\n            $('#modal-image-submit').unbind('click');\r\n            $('#post-image').val($('#modal-image-add #res-image').val());\r\n            $('#post-image-name').val($('#modal-image-add #res-image option:selected').data('main-img-src'));\r\n            $('#modal-image-add #res-image').prop('multiple', 'multiple');\r\n            $('#modal-image-add').modal('hide');\r\n        });\r\n    });\r\n\r\n    $('#modal-image-add').css('z-index', '65540');\r\n\r\n});\r\n"]}