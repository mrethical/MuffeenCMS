{"version":3,"sources":["post-create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post-create.js","sourcesContent":["\nvar input_tags_container = null; // set this at onload\nvar div_tags_container = null; // set this at onload\n\nvar tags = [];\nvar tag_count = 0;\nfunction add_tag_input(name) {\n    if (tags.indexOf(name.toLowerCase()) != -1) return false;\n    var html = '<input type=\"hidden\" class=\"post-tag\" name=\"tags[]\" id=\"post-tag-' + tag_count + '\" value=\"' + name + '\" />';\n    input_tags_container.append(html);\n    tags.push(name.toLowerCase());\n    return tag_count++;\n}\n\nfunction add_tag_container(id) {\n    if (id === false) return false;\n    var tag_name = $('#post-tag-' + id).val();\n    var html = \t'<div class=\"post-tag-container\" id=\"post-tag-container-' + id + '\">'\n        +\t\t'<span class=\"post-tag-name\">' + tag_name + '</span>&nbsp;'\n        +\t\t'<button type=\"button\" class=\"close\" id=\"post-tag-container-delete-' + id  + '\" aria-label=\"Close\">'\n        +\t\t\t'<span aria-hidden=\"true\">&times;</span>'\n        +\t\t'</button>'\n        +\t'</div>';\n    $(html).insertBefore('#post-tag-insert');\n    $('#post-tag-container-delete-' + id ).click(function(){\n        $('#post-tag-container-' + id).remove();\n        tags.splice(tags.indexOf($('#post-tag-' + id).val()), 1);\n        $('#post-tag-' + id).remove();\n    });\n}\n\nfunction create_tag_insert_input() {\n    var html = \t'<div class=\"post-tag-container\" id=\"post-tag-insert\">'\n        +\t\t'<span style=\"\">New:</span>&nbsp;'\n        +\t\t'<input type=\"text\" class=\"typeahead form-control\" id=\"post-tag-insert-name\" />&nbsp;'\n        +\t\t'<button type=\"button\" class=\"btn btn-default\" id=\"post-tag-insert-save\">'\n        +\t\t\t'<i class=\"fa fa-check\" aria-hidden=\"true\"></i>'\n        +\t\t'</button>'\n        +\t'</div>';\n    div_tags_container.append($(html));\n    $('#post-tag-insert-name').typeahead({\n        highlight: true,\n    }, {\n        name: 'tags',\n        source: function(query, syncResults, asyncResults) {\n            $.get(server_dir + 'admin/posts/tags?output=search&keyword=' + query, function(data) {\n                asyncResults(data);\n            });\n        }\n    });\n    $('#post-tag-insert-save').click(function(){\n        var name = $('#post-tag-insert-name').val();\n        if (name != '') {\n            var id = add_tag_input(name);\n            add_tag_container(id);\n            $('#post-tag-insert-name').val('');\n        }\n    });\n    $('#post-tag-insert-name').keypress(function (e) {\n        var key = e.which;\n        if (key == 13) { // the enter key code\n            $('#post-tag-insert-save').click();\n            return false;\n        }\n    });\n}\n\n$(function(){\n\n    input_tags_container = $('#tags-container > #input-tags-container');\n    div_tags_container = $('#tags-container > #div-tags-container');\n    create_tag_insert_input();\n\n    $('.post-tag').each(function(){\n        tags.push($(this).val().toLowerCase());\n        add_tag_container(tag_count);\n        tag_count++;\n    });\n\n    $('#categories-filter').change(function(){\n        var success = function(result) {\n            $('#res-image').empty();\n            $('#res-image').append(result);\n            $(\"select.image-picker\").imagepicker({\n                show_label: true,\n                initialized: function(){\n                    $('ul.image_picker_selector > li').prop('class', 'col-sm-5');\n                    $('ul.image_picker_selector > li').css('padding', '0px');\n                    $('ul.image_picker_selector > li').css('margin', '0px 20px 0px 0px');\n                    $('ul.image_picker_selector > li > div.thumbnail > p').css('word-wrap', 'break-word');\n                }\n            });\n        };\n        callback('GET', 'admin/resources/categories/' + $(this).val(), 'html',\n            {output: 'resources_select_options', image_only: 'true'}, success);\n    });\n\n    $('#add-image').click(function(){\n        $('#modal-image-add #res-image').prop('multiple', '');\n        $(\"select.image-picker\").imagepicker({\n            show_label: true,\n            initialized: function(){\n                $('ul.image_picker_selector > li').prop('class', 'col-sm-5');\n                $('ul.image_picker_selector > li').css('padding', '0px');\n                $('ul.image_picker_selector > li').css('margin', '0px 20px 0px 0px');\n                $('ul.image_picker_selector > li > div.thumbnail > p').css('word-wrap', 'break-word');\n            }\n        });\n        $('#modal-image-add').modal(\"show\");\n        $('#modal-image-submit').click(function() {\n            $('#modal-image-submit').unbind('click');\n            $('#post-image').val($('#modal-image-add #res-image').val());\n            $('#post-image-name').val($('#modal-image-add #res-image option:selected').data('main-img-src'));\n            $('#modal-image-add #res-image').prop('multiple', 'multiple');\n            $('#modal-image-add').modal('hide');\n        });\n    });\n\n    $('#modal-image-add').css('z-index', '65540');\n\n});\n"]}