{"version":3,"sources":["posts-tags.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"posts-tags.js","sourcesContent":["\r\nfunction refreshTable(html) {\r\n    $('div#table-container').empty();\r\n    $('div#table-container').append(html);\r\n}\r\n\r\nfunction reloadTable() {\r\n    var success = function (result) {\r\n        refreshTable(result);\r\n        generatePagination();\r\n    }\r\n    callback('GET', 'admin/posts/tags', 'html', {output: 'table'}, success);\r\n}\r\n\r\nfunction generatePagination() {\r\n    var count = $('input#total-record').val();\r\n    var limit = 10;\r\n    $('.pagination').pagination({\r\n        items: count,\r\n        itemsOnPage: limit,\r\n        onPageClick: function(pageNumber){\r\n            $('.pagination').pagination('disable');\r\n            var success = function(result){\r\n                refreshTable(result);\r\n                $('.pagination').pagination('enable');\r\n            }\r\n            callback('GET', 'admin/posts/tags', 'html', {output: 'table', limit: limit, offset: (pageNumber - 1) * limit }, success);\r\n        }\r\n    });\r\n}\r\n\r\nfunction resetErrors() {\r\n    $('#modal-tag-form-name').removeClass('has-error');\r\n    $('#modal-tag-form-name .help-block').remove();\r\n}\r\n\r\nvar success = function(result){\r\n    if (result.success){\r\n        reloadTable();\r\n        $('#modal-tag').modal('hide');\r\n        $('#modal-tag-submit').prop('disabled', false);\r\n    }\r\n}\r\n\r\nvar error = function(response) {\r\n    if (response.status === 422) {\r\n        for (var key in response.responseJSON) {\r\n            var value = response.responseJSON[key];\r\n        }\r\n        $('#modal-tag-form-' + key).addClass('has-error');\r\n        $('#modal-tag-form-' + key).append('<p class=\"help-block\">' + value + '</p>');\r\n        $('#modal-tag-submit').prop('disabled', false);\r\n    }\r\n}\r\n\r\nvar prepForm = function() {\r\n    $('#modal-tag-submit').prop('disabled', true);\r\n    resetErrors();\r\n}\r\n\r\n$(function() {\r\n    $('#modal-tag').on('show.bs.modal', function (event) {\r\n        // load data\r\n        var button = $(event.relatedTarget);\r\n        var action = button.data('action');\r\n        var id = button.data('id') || 0;\r\n        var name = button.data('name');\r\n        // set data\r\n        $('#modal-tag-label').text(action);\r\n        $('#tag-id').val(id);\r\n        $('#tag-name').val(name);\r\n        // if submit add new\r\n        if (action == 'Add New') {\r\n            $('#modal-tag-submit').click(function() {\r\n                prepForm();\r\n                var data = { name: $('#tag-name').val(), _token: $('input#tag-post-token').val() };\r\n                callback('POST', 'admin/posts/tags', 'json', data, success, error);\r\n            });\r\n        }\r\n        // if submit edit\r\n        else if (action == 'Edit') {\r\n            $('#modal-tag-submit').click(function() {\r\n                prepForm();\r\n                var data = {\r\n                    name: $('#tag-name').val(),\r\n                    _token: $('input#tag-post-token').val(),\r\n                    _method: 'PATCH'\r\n                };\r\n                callback('POST', 'admin/posts/tags/' + $('#tag-id').val(), 'json', data, success, error);\r\n            });\r\n        }\r\n    });\r\n    $('#modal-tag').on('hide.bs.modal', function (event) {\r\n        $('#modal-tag-submit').unbind('click');\r\n        resetErrors();\r\n    });\r\n    $('#modal-tag-delete').on('show.bs.modal', function (event) {\r\n        var button = $(event.relatedTarget);\r\n        var id = button.data('id');\r\n        $('#modal-tag-delete-submit').click(function() {\r\n            $('#modal-tag-delete').modal('hide');\r\n            var data = {\r\n                _token: $('input#tag-post-token').val(),\r\n                _method: 'DELETE'\r\n            };\r\n            var success = function(result){\r\n                if (result.success = true){\r\n                    reloadTable();\r\n                }\r\n            }\r\n            callback('POST', 'admin/posts/tags/' + id, 'json', data, success);\r\n        });\r\n    })\r\n\r\n    generatePagination();\r\n\r\n    $(document).on(\"keypress\", \"form\", function(event) {\r\n        return event.keyCode != 13;\r\n    });\r\n\r\n});"]}